---
layout: page
title: ðŸ›  Methodology Assignment 6
description: Creating a Docker image.
nav_exclude: true
---

# ðŸ›  Methodology Assignment 6

{: .red }
**This assignment hasn't been updated for Fall 2023 â€“ don't do it yet.**

Submit this assignment to Gradescope by **Wednesday, November 23rd at 11:59PM** (note the later-than-usual deadline). Post questions with the assignment, and the Quarter 1 code submission more generally, [here](https://edstem.org/us/courses/28947/discussion/2153809).

---

In this assignment, you will submit a working draft of your Quarter 1 Project's code, such that it:
- Uses test data.
- Implements the `test` target.

Before proceeding, make sure you're familiar with Lessons [2 (Project Organization)](../../../../lessons/q1/02), [5 (Software Development)](../../../../lessons/q1/05) and [6 (Long-Running Jobs and Test Data)](../../../../lessons/q1/06).

1. Suppose `<projectdir>` is the repository in which your project code is being written. In the folder `<projectdir>/test/testdata`, create and store test data, according to the principles from Lesson 6. For the purposes of MA 5, you need to create a minimal test data set that your project can take as input and run from start to finish on, without error. Your test data should be in the format that most closely resembles "raw" data that your project may use. For instance, if you use an API to access data, create test data in the same format that is returned by the API. (Remember, test data is **not** data that results from a train/test split! Review Lesson 6 for the definition.)

2. Implement the target `test` in `run.py` that runs all your targets on the test data you created. (We know your project isn't finished yet; for now, the `test` target should just build all outputs that you've currently implemented.)

3. At the root of your project repository, create a `submission.json` file that follows the conventions in the [Code Submission Specifics section of the Quarter 1 Project specifications](../../../projects/q1#code-submission-specifics). The file should have two key-value pairs (yes, including a DockerHub image).

4. Push your repository to GitHub, and submit it to Gradescope.

MA 5 will be autograded on Gradescope; you'll be able to see your score right when you submit. The tests will not depend on your project's actual output, just on whether or not it satisfies the guidelines above.

*Note:* As with every methodology assignment, you should work on this
individually. You can discuss the requirements with your group, but should create test data and submit the repository separately. Once the assignment is turned in, you can all share your test data.

Before attempting this assignment, make sure to read [Lesson 4](../../../../lessons/q1/04) and complete the tasks marked **Action Item**{: .label .label-red } there. Submit this assignment to Gradescope by **Sunday, October 23rd at 11:59PM**. Post questions with the assignment [here](https://edstem.org/us/courses/28947/discussion/1970469).

In this assignment, you'll:
1. Create a Dockerfile with required specifications, building off of the [base data science image](https://hub.docker.com/r/ucsdets/datahub-base-notebook) maintained by UCSD ETS.
2. Use that Dockerfile to build an image and push it to Docker Hub.

Follow the steps below. Unless otherwise specified, complete all steps on **your personal computer**. If you're unable to do so, see the last bullet point [here](../../../../lessons/q1/04#installing-docker-locally).

Here's a walkthrough video of the assignment, recorded during the lecture help session on Monday, October 17th at 4PM:

<center><iframe width="711" height="400" src="https://www.youtube.com/embed/oeotJjaCJUI" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></center>

1. Create a folder, and within it create a file with no extensions named `Dockerfile`. In it, copy the [Dockerfile template](https://github.com/ucsd-ets/datahub-example-notebook/blob/master/Dockerfile) from the tutorial from lecture.

2. Modify the Dockerfile so that:
- [`aria2`](https://aria2.github.io/), [`nmap`](https://nmap.org/), and [`traceroute`](https://en.wikipedia.org/wiki/Traceroute) are installed using `apt-get`
- [`geopandas`](https://geopandas.org/) and [`babypandas`](https://github.com/babypandas-dev/babypandas) are installed using `conda` or `pip`
  - There is nothing special about these packages; we just need you to install something!
- The last line, `CMD ["/bin/bash"]`, is uncommented

3. Following the steps in the [tutorial](https://github.com/ucsd-ets/datahub-example-notebook#step-211-build) linked in lecture, use the Dockerfile you created in Step 2 to create an image (using `docker build`) and launch a container with that image (using `docker run`). Make sure that all packages are present. 
- **Note:** It may take >10 minutes to create the image for the first time. This is to be expected, because it's pulling ~5GB of files. Subsequent pulls will be much faster.
- If you aren't able to build due to an error with the line `RUN apt-get -y install aria2 nmap traceroute`, add `RUN apt update` to your Dockerfile before the aforementioned line.
- To verify that packages you installed via `apt-get` are installed, run `which <package-name>`, e.g. `which nmap` (for `aria2`, use `which aria2c`).
- To verify that packages you installed via `conda` or `pip` are installed, open a Python interpreter and try to import them.

4. Push the image to Docker Hub, again using the instructions in the tutorial from above. **Make sure your repository is public, so that we can verify it was set up correctly!**
- **Note:** It may take up to 30 minutes for your image to appear on Docker Hub after you run `docker push <image>`. This is to be expected.

5. After your image appears on Docker Hub, follow the instructions [from lecture](../../../../lessons/q1/04#using-images-from-docker-hub) to launch a container on DSMLP using your image. Test out your environment on DSMLP. Can you start `python` and import `babypandas`?

6. Submit your assignment to Gradescope by turning in the path to your image on Docker Hub (e.g. `sjrampure/test-image:latest`) and your Dockerfile. Make sure to include the tag (i.e. `:latest`). We will pull your image and test whether it meets the requirements stated above. You will _not_ see an autograder score right away, unlike in Methodology Assignments 1 and 2.