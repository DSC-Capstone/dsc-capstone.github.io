<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>Lesson 6 ‚Äì Long-Running Jobs | DSC 180AB</title><meta name="generator" content="Jekyll v3.9.2" /><meta property="og:title" content="Lesson 6 ‚Äì Long-Running Jobs" /><meta name="author" content="Suraj Rampure" /><meta property="og:locale" content="en_US" /><meta name="description" content="DSC 180AB, Fall 2023 and Winter 2024 at UC San Diego" /><meta property="og:description" content="DSC 180AB, Fall 2023 and Winter 2024 at UC San Diego" /><link rel="canonical" href="http://localhost:4000/lessons/q1/06/" /><meta property="og:url" content="http://localhost:4000/lessons/q1/06/" /><meta property="og:site_name" content="DSC 180AB" /><meta property="og:type" content="website" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Lesson 6 ‚Äì Long-Running Jobs" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Suraj Rampure"},"description":"DSC 180AB, Fall 2023 and Winter 2024 at UC San Diego","headline":"Lesson 6 ‚Äì Long-Running Jobs","url":"http://localhost:4000/lessons/q1/06/"}</script><body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><title id="svg-external-link-title">(external link)</title><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> </svg><div class="side-bar"><div class="site-header"> <a href="/" class="site-title lh-tight"> DSC 180AB </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a></div><nav aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">üè° Home</a><li class="nav-list-item"><a href="/syllabus/" class="nav-list-link">üìì Syllabus</a><li class="nav-list-item"><a href="/office-hours/" class="nav-list-link">üìÜ Office Hours</a><li class="nav-list-item"><a href="/staff/" class="nav-list-link">üôã Staff</a><li class="nav-list-item"><a href="/mentors/" class="nav-list-link">üë®‚Äçüè´ Mentor Guide</a><li class="nav-list-item"><a href="/archive/" class="nav-list-link">üíæ Archive</a></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search DSC 180AB" aria-label="Search DSC 180AB" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a href="https://www.gradescope.com/courses/637426" class="site-button" > Gradescope </a><li class="aux-nav-list-item"> <a href="https://edstem.org/us/courses/48541/discussion/" class="site-button" > Ed </a><li class="aux-nav-list-item"> <a href="https://dsc-capstone.github.io/enrollment" class="site-button" > List of Domains </a><li class="aux-nav-list-item"> <a href="https://dsc-capstone.github.io/2022-23" class="site-button" > 2022-23 Showcase </a></ul></nav></div><div id="main-content-wrap" class="main-content-wrap"><div id="main-content" class="main-content" role="main"> <script type="text/javascript" async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"> </script><h1 class="no_toc" id="lesson-6--long-running-jobs"> <a href="#lesson-6--long-running-jobs" class="anchor-heading" aria-labelledby="lesson-6--long-running-jobs"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Lesson 6 ‚Äì Long-Running Jobs</h1><p>All lectures will be delivered as readings that you complete on your own time. Post questions with the lesson <a href="https://edstem.org/us/courses/28947/discussion/2106318">here</a>.</p><p>There is no Methodology Assignment associated with this lesson. However, the lesson describes some required aspects of the Quarter 1 Project code, such as <a href="#test-data">test data</a>.</p><hr /><h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents</h2><ol id="markdown-toc"><li><a href="#remote-job-submission" id="markdown-toc-remote-job-submission">Remote Job Submission</a><ol><li><a href="#overview" id="markdown-toc-overview">Overview</a><li><a href="#dsmlp-and-kubernetes" id="markdown-toc-dsmlp-and-kubernetes">DSMLP and Kubernetes</a><li><a href="#-running-jobs-on-background-pods" id="markdown-toc--running-jobs-on-background-pods">üé• Running Jobs on Background Pods</a></ol><li><a href="#test-data" id="markdown-toc-test-data">Test Data</a><ol><li><a href="#overview-1" id="markdown-toc-overview-1">Overview</a><li><a href="#using-test-data" id="markdown-toc-using-test-data">Using Test Data</a></ol><li><a href="#logging" id="markdown-toc-logging">Logging</a></ol><hr /><h2 id="remote-job-submission"> <a href="#remote-job-submission" class="anchor-heading" aria-labelledby="remote-job-submission"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Remote Job Submission</h2><h3 id="overview"> <a href="#overview" class="anchor-heading" aria-labelledby="overview"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview</h3><p>Picture this: You‚Äôre in a Jupyter Notebook, and hit <code class="language-plaintext highlighter-rouge">SHIFT+ENTER</code> to run a cell. That cell takes minutes, if not hours, to run. Since you can‚Äôt do anything else in your notebook until the <code class="language-plaintext highlighter-rouge">[*]</code> symbol vanishes, you use this as an excuse to waste time on TikTok or Reddit. You‚Äôve likely experienced this before ‚Äì I know I have.</p><center> <img src="assets/compiling.png" width="35%" /> </center> <center><i>In the traditional computing context, it was compiling that took a long time. In your case, it's likely model training. (<a href="https://xkcd.com/303/">source</a>)</i></center><p>The reality is, <strong>human time is worth a lot more than compute time</strong>. While we can only work for so many hours a day, servers (like DSMLP) can run 24/7. Here, we‚Äôll learn how to initiate jobs that run for hours, or even days, on DSMLP. In order to do this, we need:</p><ul><li>A server that can run even after we log out. As we‚Äôll see, we can make DSMLP behave this way. Note that vanilla DataHub doesn‚Äôt work this way ‚Äì after 20 minutes of inactivity, DataHub disconnects you.<li>Code that doesn‚Äôt require human interaction.<ul><li>The job is going to run for minutes or hours without any intervention ‚Äì we need to be able to run a single command, e.g. a <strong>build script</strong>, that runs our entire workflow.</ul><li>Code that is largely correct.<ul><li>We don‚Äôt want to wait hours before figuring out that our code is incorrect! As we‚Äôll see in the <a href="#test-data">Test Data</a> section, there are best practices to follow here.</ul><li>Good logging.<ul><li>Debugging is more difficult ‚Äì the outputs of <code class="language-plaintext highlighter-rouge">print</code> statements won‚Äôt be captured. In the <a href="#logging">Logging</a> section, we‚Äôll discuss this further.</ul></ul><h3 id="dsmlp-and-kubernetes"> <a href="#dsmlp-and-kubernetes" class="anchor-heading" aria-labelledby="dsmlp-and-kubernetes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> DSMLP and Kubernetes</h3><p>Over the last few weeks, we‚Äôve learned how to launch servers on DSMLP with custom compute resources (amount of CPUs, GPUs, and RAM) and Docker images. It turns out that DSMLP is a <em>Kubernetes cluster</em>. <a href="https://kubernetes.io/docs/concepts/overview/">Kubernetes</a> is a platform that manages, or <em>orchestrates</em>, containerized workloads. Recall from <a href="../04">Lesson 4</a> that each server on DSMLP is a Docker container; Kubernetes is the system that manages which containers receive which resources on DSMLP.</p><p><em>Fun fact: <a href="https://kubernetes.io/docs/concepts/overview/">Per the documentation</a>, Kubernetes is often shortened to ‚ÄúK8S‚Äù because there are 8 letters between the K and s in Kubernetes.</em></p><p>When we run a launch script on DSMLP, we are requesting a Kubernetes <em>pod</em>. While not entirely accurate, it‚Äôs simplest to think of a pod as another term for a container (this is not fully accurate because pods can consist of multiple containers).</p><p>The reason this context is relevant is because we need to interact with the underlying Kubernetes infrastructure in order to initiate a long-running job in a pod. While on the DSMLP jumpbox server, there are two Kubernetes-related command-line tools to know about:</p><ul><li><code class="language-plaintext highlighter-rouge">kubectl</code>, which stands for ‚ÄúKubernetes control‚Äù, allows us to list and delete pods associated with the current user. (Not sure how it‚Äôs pronounced? <a href="https://www.youtube.com/watch?v=2wgAIvXpJqU">Neither are the enthusiasts.</a>)<li><code class="language-plaintext highlighter-rouge">kubesh</code>, which stands for ‚ÄúKubernetes shell‚Äù, allows us to connect to the shell (command-line) in a specified pod.</ul><p><strong>To launch a background pod ‚Äì that is, a pod in which we will initiate a long-running job ‚Äì we use the <code class="language-plaintext highlighter-rouge">-b</code> flag when running a launch script.</strong> For instance, we may run <code class="language-plaintext highlighter-rouge">launch-scipy-ml -g 1 -c 4 -i srampure/lesson6:latest -b</code> to create a background-enabled pod with 1 GPU and 4 CPU cores, that has the Docker image <code class="language-plaintext highlighter-rouge">srampure/lesson6:latest</code> instantiated. When using the <code class="language-plaintext highlighter-rouge">-b</code> flag, notice that we are <strong>not</strong> put into the pod that we requested ‚Äì instead, the pod is simply created.</p><center><img src="assets/running-b.png" width="80%" /></center> <center><i>Note that the hostname is still <code>[srampure@dsmlp-login]</code>!</i></center><p>The resulting output contains the pod ID ‚Äì <code class="language-plaintext highlighter-rouge">srampure-20515</code> in this case ‚Äì which we‚Äôll need to remember in order to interact with the pod. In order to actually enter the pod, we can run <code class="language-plaintext highlighter-rouge">kubesh &lt;pod-id&gt;</code>, e.g. <code class="language-plaintext highlighter-rouge">kubesh srampure-20515</code>.</p><p>Once we enter the pod, everything will appear as though we just ran our launch script without the <code class="language-plaintext highlighter-rouge">-b</code> flag. However, there‚Äôs a difference ‚Äì when we exit our pod (by either typing <code class="language-plaintext highlighter-rouge">exit</code> or hitting <code class="language-plaintext highlighter-rouge">CONTROL+D</code>), any processes we initiated will keep running!</p><h3 id="-running-jobs-on-background-pods"> <a href="#-running-jobs-on-background-pods" class="anchor-heading" aria-labelledby="-running-jobs-on-background-pods"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> üé• Running Jobs on Background Pods</h3><p>For a walkthrough on how to initiate long-running jobs, watch the following walkthrough video.</p><div style="position: relative; padding-bottom: 56.25%; height: 0;"><iframe src="https://www.loom.com/embed/ee0651de02e14e50aa8b94e8e4455e90" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></iframe></div><p>As a summary:</p><ul><li><code class="language-plaintext highlighter-rouge">kubesh &lt;pod-id&gt;</code> launches a pod.<li><code class="language-plaintext highlighter-rouge">kubectl get pods</code> lists all pods.<li><code class="language-plaintext highlighter-rouge">kubectl delete pod &lt;pod-id&gt;</code> deletes a pod.<li>Adding the <code class="language-plaintext highlighter-rouge">&amp;</code> after a call to <code class="language-plaintext highlighter-rouge">python</code> in the command-line, e.g. <code class="language-plaintext highlighter-rouge">python run.py test data &amp;</code>, runs your Python process in the background without taking over the command prompt.<ul><li><code class="language-plaintext highlighter-rouge">ps</code> lists all of the current processes and their IDs.<li><code class="language-plaintext highlighter-rouge">kill &lt;process-id&gt;</code> kills a process.</ul></ul><p>Note: The default timeout, according to the <a href="https://support.ucsd.edu/services?id=kb_article_view&amp;sysparm_article=KB0032269&amp;sys_kb_id=5bf581ba872299d4947a0fa8cebb35ea">DSMLP documentation</a>, is 6 hours (not 3, as mentioned in the video). If you need to need a pod to run for up to 12 hours, you can specify this by writing a custom launch script; see <a href="https://support.ucsd.edu/services?id=kb_article_view&amp;sysparm_article=KB0032273&amp;sys_kb_id=b18fd328dbe2dcd04cd8f06e0f961988">here</a> for instructions on how to do so (you may also want to do this if you‚Äôve gotten annoyed of writing out several flags each time you want to launch a pod). If you need a pod to run for more than 12 hours, contact datahub@ucsd.edu and mention that it‚Äôs for DSC 180A.</p><p>Now that we know <em>how</em> to initiate long-running jobs, let‚Äôs look at best practices for doing so.</p><hr /><h2 id="test-data"> <a href="#test-data" class="anchor-heading" aria-labelledby="test-data"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Test Data</h2><h3 id="overview-1"> <a href="#overview-1" class="anchor-heading" aria-labelledby="overview-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview</h3><p>It would be a massive waste of time and resources to kick off a long-running job that runs for a few hours before terminating because of a bug in our code. In order to detect such bugs, we will create and run our code on <em>test data</em>.</p><p>Test data is <em>small</em>, made-up data that is realistic enough to <em>test</em> the behavior of our code.</p><ul><li>It is not a sample of real data ‚Äì it should be <em>created</em> by the developer.<li>It is designed to test the correctness of code.<li>Developers should design each line/component of the test data to test different aspects of their code.</ul><p><strong class="label label-yellow">Warning</strong> <strong>In this context, test data is created for unit tests, <em>not</em> data that results from a train/test split!</strong></p><p>Test data should only be a few lines long. You should be able to verify that your code works correctly on test data <strong>by hand</strong>. For instance, suppose your code takes in a dataset, uses <a href="https://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.PolynomialFeatures.html"><code class="language-plaintext highlighter-rouge">sklearn.preprocessing.PolynomialFeatures</code></a> to create a quadratic feature, and trains a regression model of the form \(H(x) = w_0 + w_1 x + w_2 x^2\). A possible test dataset might be</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>x,y
-2,1
2,9
3,16
</code></pre></div></div><p>By hand, we can verify that the three points above satisfy \(y = (1 + x)^2 = 1 + 2x + x^2\), so as a ‚Äútest case‚Äù we can expect that our code outputs \(w_0 = 1, w_1 = 2, w_2 = 1\) (with a loss of 0).</p><p>Note that since test data is synthetic, the resulting trained models will be meaningless. For instance, the weights \(w_0 = 1, w_1 = 2, w_2 = 1\) mean nothing if our regression model aims to model car acceleration as a function of horsepower. This is expected ‚Äì the sole purpose of test data is to ensure that code works correctly.</p><h3 id="using-test-data"> <a href="#using-test-data" class="anchor-heading" aria-labelledby="using-test-data"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using Test Data</h3><p>Run your project using test data until you can verify that your code and outputs are correct. Once you‚Äôve done so, then you can initiate a long-running job on <em>real</em> data, with the piece of mind that it should run correctly. (As an intermediate step you may also elect to run your code on a <em>sample</em> of the full dataset, but remember, the test data is not merely a sample).</p><p>Recall, in <a href="../05#targets">Lesson 5</a>, we introduced the idea of <em>targets</em>.</p><blockquote><p>A target specifies what to build. Specifically, a target is a string describing the desired output, and targets are used when calling build scripts from the Terminal.</p></blockquote><p>You‚Äôre <strong>encouraged</strong> to implement a <code class="language-plaintext highlighter-rouge">test-data</code> target, that runs the same code as the <code class="language-plaintext highlighter-rouge">data</code> target, but only on your test data. To train a model on your test data, you may run your build script with <code class="language-plaintext highlighter-rouge">test-data</code> as one of your many targets:</p><div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">python</span> <span class="n">run</span><span class="p">.</span><span class="n">py</span> <span class="n">test</span><span class="o">-</span><span class="n">data</span> <span class="n">features</span> <span class="n">model</span>
</code></pre></div></div><p>For instance, the above call to <code class="language-plaintext highlighter-rouge">run.py</code> should featurize test data and use that featurized data to train a model.</p><p>While you‚Äôre encouraged to implement a <code class="language-plaintext highlighter-rouge">test-data</code> target, you‚Äôre <strong>required</strong> to implement a <code class="language-plaintext highlighter-rouge">test</code> target, both for your Quarter 1 Project and for your Quarter 2 Project. The <code class="language-plaintext highlighter-rouge">test</code> target should behave the same as the <code class="language-plaintext highlighter-rouge">all</code> target discussed in Lesson 5, just on your test data ‚Äì that is, it should build your entire project from scratch, using test data.</p><p>We will use your <code class="language-plaintext highlighter-rouge">test</code> target to <strong>grade</strong> your project code in both quarters. Here are the specific commands we‚Äôll run on our personal DSMLP containers to grade your work:</p><ol><li><code class="language-plaintext highlighter-rouge">launch-scipy-ml.sh -i &lt;your-docker-repo&gt;</code><li><code class="language-plaintext highlighter-rouge">git clone &lt;your-github-repo&gt;</code>*<li><code class="language-plaintext highlighter-rouge">python run.py test</code><li><code class="language-plaintext highlighter-rouge">&lt;script that checks generated files&gt;</code></ol><p><em>*While your Quarter 2 Project repo is required to be public, your Quarter 1 Project repo can be private. As such, if your code is not accessible on GitHub, we‚Äôll download it directly from Gradescope.</em></p><p>This means that we (methodology staff) don‚Äôt need access to your ‚Äúreal‚Äù data in order to evaluate your project. While your reports and deliverables will be a result of real data, your submitted code will not include it. As mentioned in Lesson 2, <strong>your actual data should never included in Git/version control</strong>, since it does not change. However, since test data is <em>created</em> by the developer and may change as the project evolves, it <strong>should</strong> be included in version control. For instance, you may place it in the <code class="language-plaintext highlighter-rouge">test/testdata/</code> directory.</p><hr /><h2 id="logging"> <a href="#logging" class="anchor-heading" aria-labelledby="logging"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Logging</h2><p>When we initiate long-running jobs that run in the background, we don‚Äôt typically have access to the command-line outputs (e.g. print statements) of our code. As such, it can be particularly difficult to debug when and why something went wrong. In this setting, the cost of trial-and-error is high, since each ‚Äútrial‚Äù takes a long time to run.</p><p>The solution is to save logs to a file that you can inspect afterwards. The most rudimentary way to do this, if you‚Äôre already using ‚Äúprint debugging‚Äù, is to use the <code class="language-plaintext highlighter-rouge">&gt;</code> keyword when calling <code class="language-plaintext highlighter-rouge">python</code> from the command-line. For instance,</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python run.py all &gt; log.txt &amp;
</code></pre></div></div><p>will run <code class="language-plaintext highlighter-rouge">run.py</code> in the background (<code class="language-plaintext highlighter-rouge">&amp;</code>), with the <code class="language-plaintext highlighter-rouge">test</code> target, and will save all outputs (e.g. results of print statements, warnings, and error messages) to <code class="language-plaintext highlighter-rouge">log.txt</code>. While this works, it can be difficult to determine where in the project each line in <code class="language-plaintext highlighter-rouge">log.txt</code> came from.</p><p>A better solution is to use the built-in <a href="https://docs.python.org/3/library/logging.html"><code class="language-plaintext highlighter-rouge">logging</code></a> module. It automatically records a timestamp each time it is called, along with which file and function the logging occurred in. You can customize the granularity and frequency of the logs to match your use case. We won‚Äôt cover the details of the <code class="language-plaintext highlighter-rouge">logging</code> module here; instead, we‚Äôll point you to <a href="https://realpython.com/python-logging/">this tutorial by realpython.com</a>. However, here is an example of how the module works:</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># randdiv.py
</span><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>

<span class="n">logging</span><span class="p">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s">'log.txt'</span><span class="p">,</span> 
		    <span class="n">filemode</span><span class="o">=</span><span class="s">'a'</span><span class="p">,</span> 
		    <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="p">.</span><span class="n">INFO</span><span class="p">,</span>
		    <span class="n">datefmt</span><span class="o">=</span><span class="s">'%H:%M:%S'</span><span class="p">,</span>
		    <span class="nb">format</span><span class="o">=</span><span class="s">'%(asctime)s,%(msecs)d %(name)s %(levelname)s %(message)s'</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">myfunc</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">randint</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">randint</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">b</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">logging</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="s">'zerodivisionerror preempted'</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">a</span> <span class="o">/</span> <span class="n">b</span>

<span class="k">print</span><span class="p">([</span><span class="n">myfunc</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)])</span>
</code></pre></div></div><p>Upon running <code class="language-plaintext highlighter-rouge">python randdiv.py</code>, <code class="language-plaintext highlighter-rouge">log.txt</code> might contain:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2022-10-30 23:37:11,815,815 root INFO zerodivisionerror preempted
</code></pre></div></div><p>This tells us when (October 30th at 11:37:11PM) and where (<code class="language-plaintext highlighter-rouge">randdiv.py</code>, the root-level file in this case) each call to <code class="language-plaintext highlighter-rouge">logging.info</code> occurred.</p></div></div><div class="search-overlay"></div></div>
