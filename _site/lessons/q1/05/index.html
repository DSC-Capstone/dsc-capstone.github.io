<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>Lesson 5 â€“ Software Development | DSC 180AB</title><meta name="generator" content="Jekyll v3.9.2" /><meta property="og:title" content="Lesson 5 â€“ Software Development" /><meta name="author" content="Suraj Rampure" /><meta property="og:locale" content="en_US" /><meta name="description" content="DSC 180AB, Fall 2023 and Winter 2024 at UC San Diego" /><meta property="og:description" content="DSC 180AB, Fall 2023 and Winter 2024 at UC San Diego" /><link rel="canonical" href="http://localhost:4000/lessons/q1/05/" /><meta property="og:url" content="http://localhost:4000/lessons/q1/05/" /><meta property="og:site_name" content="DSC 180AB" /><meta property="og:type" content="website" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Lesson 5 â€“ Software Development" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Suraj Rampure"},"description":"DSC 180AB, Fall 2023 and Winter 2024 at UC San Diego","headline":"Lesson 5 â€“ Software Development","url":"http://localhost:4000/lessons/q1/05/"}</script><body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><title id="svg-external-link-title">(external link)</title><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> </svg><div class="side-bar"><div class="site-header"> <a href="/" class="site-title lh-tight"> DSC 180AB </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a></div><nav aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">ğŸ¡ Home</a><li class="nav-list-item"><a href="/syllabus/" class="nav-list-link">ğŸ““ Syllabus</a><li class="nav-list-item"><a href="/office-hours/" class="nav-list-link">ğŸ“† Office Hours</a><li class="nav-list-item"><a href="/staff/" class="nav-list-link">ğŸ™‹ Staff</a><li class="nav-list-item"><a href="/mentors/" class="nav-list-link">ğŸ‘¨â€ğŸ« Mentor Guide</a><li class="nav-list-item"><a href="/archive/" class="nav-list-link">ğŸ’¾ Archive</a></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search DSC 180AB" aria-label="Search DSC 180AB" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a href="https://www.gradescope.com/courses/637426" class="site-button" > Gradescope </a><li class="aux-nav-list-item"> <a href="https://edstem.org/us/courses/48541/discussion/" class="site-button" > Ed </a><li class="aux-nav-list-item"> <a href="https://dsc-capstone.github.io/enrollment" class="site-button" > List of Domains </a><li class="aux-nav-list-item"> <a href="https://dsc-capstone.github.io/2022-23" class="site-button" > 2022-23 Showcase </a></ul></nav></div><div id="main-content-wrap" class="main-content-wrap"><div id="main-content" class="main-content" role="main"> <script type="text/javascript" async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"> </script><h1 class="no_toc" id="lesson-5--software-development"> <a href="#lesson-5--software-development" class="anchor-heading" aria-labelledby="lesson-5--software-development"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Lesson 5 â€“ Software Development</h1><p>All lectures will be delivered as readings that you complete on your own time. Post questions with the lesson <a href="https://edstem.org/us/courses/28947/discussion/2027764">here</a>.</p><p>There is no Methodology Assignment associated with this lesson. However, it builds on the software development principles introduced in <a href="../02">Lesson 2</a>, and your final project deliverables will be graded according to how closely they follow these principles.</p><p><strong>Reminders:</strong></p><ul><li>The <a href="../../../assignments/projects/q1">Quarter 1 Project Checkpoint</a> is due <strong>this Sunday!</strong> Your checkpoint code does <em>not</em> need to follow these standards.<li>Take a look at the new <a href="../../../resources">Resources</a> tab of the course website.</ul><hr /><h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents</h2><ol id="markdown-toc"><li><a href="#overview" id="markdown-toc-overview">Overview</a><li><a href="#build-scripts" id="markdown-toc-build-scripts">Build Scripts</a><ol><li><a href="#what-is-a-build-script" id="markdown-toc-what-is-a-build-script">What is a Build Script?</a><li><a href="#targets" id="markdown-toc-targets">Targets</a><li><a href="#features-of-a-build-script" id="markdown-toc-features-of-a-build-script">Features of a Build Script</a></ol><li><a href="#configuration-files" id="markdown-toc-configuration-files">Configuration Files</a><ol><li><a href="#example-parameterizing-a-function" id="markdown-toc-example-parameterizing-a-function">Example: Parameterizing a Function</a><li><a href="#configuration-and-build-scripts" id="markdown-toc-configuration-and-build-scripts">Configuration and Build Scripts</a></ol><li><a href="#example-projects" id="markdown-toc-example-projects">Example Projects</a></ol><hr /><h2 id="overview"> <a href="#overview" class="anchor-heading" aria-labelledby="overview"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview</h2><p>Recall, in <a href="../02">Lesson 2</a>, we introduced a template for data science projects by <a href="https://drivendata.github.io/cookiecutter-data-science">Cookie Cutter Data Science</a>:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Project
â”œâ”€â”€ .gitignore         &lt;- Files to keep out of version control (e.g. data/binaries).
â”œâ”€â”€ run.py             &lt;- run.py with calls to functions in src.
â”œâ”€â”€ README.md          &lt;- The top-level README for developers using this project.
â”œâ”€â”€ data
â”‚   â”œâ”€â”€ temp           &lt;- Intermediate data that has been transformed.
â”‚   â”œâ”€â”€ out            &lt;- The final, canonical data sets for modeling.
â”‚   â””â”€â”€ raw            &lt;- The original, immutable data dump.
â”œâ”€â”€ notebooks          &lt;- Jupyter notebooks (presentation only).
â”œâ”€â”€ references         &lt;- Data dictionaries, explanatory materials.
â”œâ”€â”€ requirements.txt   &lt;- For reproducing the analysis environment, e.g.
â”‚                         generated with `pip freeze &gt; requirements.txt`
â”œâ”€â”€ src                &lt;- Source code for use in this project.
    â”œâ”€â”€ data           &lt;- Scripts to download or generate data.
    â”‚   â””â”€â”€ make_dataset.py
    â”œâ”€â”€ features       &lt;- Scripts to turn raw data into features for modeling.
    â”‚   â””â”€â”€ build_features.py
    â”œâ”€â”€ models         &lt;- Scripts to train models and make predictions.
    â”‚   â”œâ”€â”€ predict_model.py
    â”‚   â””â”€â”€ train_model.py
    â””â”€â”€ visualization  &lt;- Scripts to create exploratory and results-oriented viz.
        â””â”€â”€ visualize.py
</code></pre></div></div><p>This template was chosen out of a need to develop data science projects that are:</p><ol><li>Flexibly written, to adapt to changing questions.<li>Clearly documented, so that is clear â€“ both to you and others using your code â€“ what each piece does.<li>Reproducible, meaning that others should be able to run it themselves.</ol><p>While working on a project, your primary goal is to conduct a data-driven exploration of some problem, either using existing methods or new methods that are developed as part of your project. However, once your project is complete, it will still live on:</p><ul><li>If you structured your code well, bits and pieces of it can be extracted for other tasks that involve similar datasets, e.g. your <a href="https://www.talend.com/resources/what-is-etl/">ETL</a> logic for data acquisition and cleaning.<li>Your modeling code can be used to deploy models in production.<li>More generally, your analysis will be used for decision-making.</ul><p>In fact, when working on your project, it may be reasonable to create a separate repository for â€œgeneral use librariesâ€ that you develop, and import those libraries into your main project. That way, others can more easily adopt the general code that youâ€™ve produced.</p><p>Letâ€™s look at some examples of projects and their artifacts.</p><div class="table-wrapper"><table><thead><tr><th>Project<th>Primary Output<th>Usage<th>Other Artifacts<tbody><tr><td>Develop and train a recommender system.<td>A trained model.<td>The trained model (output) is executed on a website to give recommendations.<br /><br />The model architecture code may become its own general purpose library, particularly if you built something novel.<br /><br /> (These will live in different repositories.)<td>A data analysis section that evaluates the model, to justify the projectâ€™s worth. <strong>If you are in a methods-focused domain, you must do this!</strong><br /><br />A reproducible build, which automates updates to the model (e.g. with new training data).<tr><td>Develop tools to measure engagement on websites.<td>A set of Javascript functions.<td>The Javascript functions developed will be run on a website to track and analyze user behavior.<td>A data analysis section that shows <em>why</em> these functions and features were chosen.<tr><td>Determine how many people to hire at a company.<td>A report with recommendations on how many people to hire.<td>Analyses are collected into a report for decision-making about business.<td>A data analysis section that demonstrates <em>how</em> you arrived at your recommendations.<br /><br />A reproducible build, for those who want to re-run your analysis (e.g. with new training data).</table></div><p>For others to be able to use your project in the future, it needs be:</p><ol><li>Easily buildable: It should be easy for someone else to load your Docker image, <code class="language-plaintext highlighter-rouge">git clone</code> your repo, and run your code.<ul><li>If itâ€™s a hassle to get your project running, then others are unlikely to use it.</ul><li>Flexible: It should be easy for someone else to re-use large pieces of your project while changing just the details that are necessary for their use case.</ol><p>In the remainder of the lesson, we will look closely at two project components â€“ build scripts and configuration files â€“ that address the above two requirements directly.</p><hr /><h2 id="build-scripts"> <a href="#build-scripts" class="anchor-heading" aria-labelledby="build-scripts"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Build Scripts</h2><h3 id="what-is-a-build-script"> <a href="#what-is-a-build-script" class="anchor-heading" aria-labelledby="what-is-a-build-script"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> What is a Build Script?</h3><p>As mentioned above, itâ€™s desirable for your project to be easy to run â€“ ideally, future users can run <code class="language-plaintext highlighter-rouge">run project</code> in their Terminal and see the output of your work. Thatâ€™s precisely what build scripts enable!</p><p>Specifically, a build script runs the code in a project to â€œbuildâ€ desired output. A build script <em>does not</em> contain the implementation details of a project â€“ that belongs in library code. Instead, a build script <em>calls</em> library code, and thus should not be very complicated.</p><p>Build scripts are important for ensuring that your work is reproducible, as all science should be. While they are still not very common in data science projects, build scripts have been around for decades in other contexts. Examples include:</p><ul><li><a href="https://makefiletutorial.com">Makefiles</a>, which are used to coordinate the compilation of C/C++ code and, more generally, to run general Bash (Terminal) commands.<ul><li>These are extremely powerful for projects that involve multiple languages. You can use them in your data science projects too!</ul><li><a href="https://www.baeldung.com/ant-maven-gradle">Ant, Maven, and Gradle</a>, which all coordinate the building of Java projects.<li><a href="https://www.educative.io/answers/what-is-setuppy"><code class="language-plaintext highlighter-rouge">setup.py</code></a> files in Python packages, which are used to install packages on othersâ€™ systems. For instance, see the <code class="language-plaintext highlighter-rouge">setup.py</code> file for pandas <a href="https://github.com/pandas-dev/pandas/blob/master/setup.py">here</a>.<li>While not â€œbuild scriptsâ€, <em>workflow managers</em> like <a href="https://github.com/spotify/luigi">Luigi</a> and <a href="https://airflow.apache.org/docs/apache-airflow/stable/python-api-ref.html">Airflow</a> are similar in spirit, in that they allow you to build pipelines that â€œmove data from point A to point B quicklyâ€ (<a href="https://www.integrate.io/blog/airflow-vs-luigi/">source</a>).</ul><p>To keep things simple, you will create a barebones build script from scratch, called <code class="language-plaintext highlighter-rouge">run.py</code>. Note that you can do this even if your project doesnâ€™t involve Python code; within your Python build script, you can import the <code class="language-plaintext highlighter-rouge">os</code> and <code class="language-plaintext highlighter-rouge">sys</code> libraries to call other Bash commands. If youâ€™d like, you can write a build script in another language, e.g. <code class="language-plaintext highlighter-rouge">run.R</code> for R projects, or <code class="language-plaintext highlighter-rouge">run.sh</code> in Bash.</p><h3 id="targets"> <a href="#targets" class="anchor-heading" aria-labelledby="targets"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Targets</h3><p>A <em>target</em> specifies what to build. Specifically, a target is a string describing the desired output, and targets are used when calling build scripts from the Terminal.</p><p>You should create targets for all major â€œstepsâ€ in your project pipeline, particular for steps that it would make sense to run in isolation of other steps. For instance:</p><ul><li>You may have a target called <code class="language-plaintext highlighter-rouge">data</code> that prepares the data for your project by downloading data and running your ETL code. To use this target, users would run <code class="language-plaintext highlighter-rouge">python run.py data</code> in the Terminal.<li>You may also have a target called <code class="language-plaintext highlighter-rouge">features</code> that builds the features for your project, from the already-processed data. To use this target, users would run <code class="language-plaintext highlighter-rouge">python run.py features</code> in the Terminal.</ul><p><strong>As a reminder</strong>, in <a href="../02#runpy">Lesson 2</a>, we looked at how to use command-line arguments in Python.</p><p>Above, we kept referring to â€œusersâ€, i.e. people using your project after youâ€™ve finished building it. However, build scripts also make your life easier while working on your project. Hereâ€™s an example workflow:</p><ul><li>Write ETL logic in <code class="language-plaintext highlighter-rouge">src/etl.py</code>.<li>Import <code class="language-plaintext highlighter-rouge">etl</code> in <code class="language-plaintext highlighter-rouge">run.py</code>. Create a target called <code class="language-plaintext highlighter-rouge">data</code> that, when run via <code class="language-plaintext highlighter-rouge">python run.py data</code>, calls the relevant functions in <code class="language-plaintext highlighter-rouge">etl</code> to â€œbuildâ€ the data.<li>Work in notebooks to develop features, and, once no longer experimental, transfer feature creation code to <code class="language-plaintext highlighter-rouge">src/features.py</code>.<ul><li>As we looked at in Lesson 2, notebooks are for experimenting and presenting, <strong>not</strong> for storing library code (e.g. functions) that youâ€™ll use repeatedly.</ul><li>Add a feature creation call to <code class="language-plaintext highlighter-rouge">run.py</code> under the target <code class="language-plaintext highlighter-rouge">features</code>, so <code class="language-plaintext highlighter-rouge">python run.py features</code> â€œbuildsâ€ the features in your project.<ul><li>This should be done without rebuilding the data, if possible!</ul></ul><p>By following this workflow, itâ€™ll make it easy to update different parts of your project when, say, your datasets change.</p><p>While the intermediate target names, like <code class="language-plaintext highlighter-rouge">features</code> and <code class="language-plaintext highlighter-rouge">data</code>, are up to you, there are a few standard target names that are almost always implemented:</p><ul><li><code class="language-plaintext highlighter-rouge">all</code> runs <code class="language-plaintext highlighter-rouge">all</code> targets from scratch (<code class="language-plaintext highlighter-rouge">python run.py all</code>).<li><code class="language-plaintext highlighter-rouge">test</code> runs <code class="language-plaintext highlighter-rouge">all</code> targets on test data (<code class="language-plaintext highlighter-rouge">python run.py test</code>).<ul><li>More on test data in Lesson 6.</ul><li><code class="language-plaintext highlighter-rouge">clean</code> deletes all built files, so that you can build your project from scratch (<code class="language-plaintext highlighter-rouge">python run.py clean</code>).<ul><li>It reverts to a <em>clean</em> repository.</ul></ul><h3 id="features-of-a-build-script"> <a href="#features-of-a-build-script" class="anchor-heading" aria-labelledby="features-of-a-build-script"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Features of a Build Script</h3><p>As a bare minimum, build scripts must piece together library code to create the output for your project. But, ideally, build scripts:</p><ul><li>(basic) Define targets that both clarify the overarching logic of the project and build intermediate states of the project (for debugging and for users who want to adapt your project from the middle).<li>(intermediate) Do not do unnecessary intermediate computation.<ul><li>If steps 1, 2, 3, â€¦, $k$ have already been completed and saved to files, then start at step $k+1$.</ul><li>(advanced) Run tasks in parallel, when possible.<ul><li>Makefiles do this!</ul></ul><p>For further reading:</p><ul><li><a href="https://docs.python.org/3/howto/argparse.html">Using <code class="language-plaintext highlighter-rouge">argparse</code> instead of <code class="language-plaintext highlighter-rouge">sys.argv</code> to manage targets</a>.<li>Makefiles for Data Science: <a href="https://bost.ocks.org/mike/make">bost.ocks.org/mike/make</a>, <a href="http://zmjones.com/make">zmjones.com/make</a>.</ul><hr /><h2 id="configuration-files"> <a href="#configuration-files" class="anchor-heading" aria-labelledby="configuration-files"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuration Files</h2><p>So far, weâ€™ve established that build scripts lay out the â€œbig pictureâ€ logic of a project, and that library code contains implementation details.</p><p>If the implementation details of your project are likely to change, then itâ€™s rather inconvenient to have to go and repeatedly change library code. Instead, as introduced in Lesson 2, you should:</p><ul><li>Parameterize the details that are likely to change â€“ i.e., make them inputs to your library functions, rather than hard-coded in the bodies of functions.<li>Save the inputs that youâ€™d like to call your functions on in <strong>configuration files</strong>.<li>Read configuration files in build scripts to quickly change the input.</ul><p>Thereâ€™s no exact science to determining what is â€œconfigurationâ€ (detail) and what is â€œcodeâ€ (logic), since it depends on the context of your project. The overarching question to ask, though, is <strong>is this value likely to change as the project evolves?</strong> If so, it belongs in configuration.</p><h3 id="example-parameterizing-a-function"> <a href="#example-parameterizing-a-function" class="anchor-heading" aria-labelledby="example-parameterizing-a-function"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example: Parameterizing a Function</h3><p>Below, we provide an example of how we might take code that doesnâ€™t involve configuration and generalize it. The example is similar, though not quite the same, as the one introduced in Lesson 2. Hopefully, it gets you to think about what role configuration files will play in your project.</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">get_data</span><span class="p">():</span>
  <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'data/raw/salaries_us_2012_2022.csv'</span><span class="p">)</span>
  <span class="n">data</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span>
          <span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s">'year'</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2015</span><span class="p">]</span>
          <span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s">'state'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'CA])
</span></code></pre></div></div><p>The function above takes in no inputs, and quite a few pieces are hard-coded. Could some of these pieces change?</p><ul><li>File path (<code class="language-plaintext highlighter-rouge">'data/raw/salaries_us_2012_2022.csv'</code>): Is it likely that youâ€™ll receive new data and want to run your code on that new data at some point? If so, then perhaps the file path should be stored in a configuration file. <strong>Then, when the path to your data changes, all you need to change is the configuration file!</strong><li>Year (<code class="language-plaintext highlighter-rouge">2015</code>): Is your project specific to 2015, or may you want to expand the timeframe that youâ€™re interested in? If so, you may want to store a list of years in a configuration file.<li>State: Is something about your project specific to California (for instance, are the datasets all California-specific)? If not, you may want to store the state(s) that youâ€™re interested in in a configuration file.</ul><p>What is unlikely to change is the structure of the code itself â€“ in this case, you will always need to load in a dataset as a DataFrame and query for only the years and states that are relevant. This <em>logic</em> certainly belongs in a Python file. A parameterized version of the function above may look like this:</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">get_data</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">years</span><span class="p">,</span> <span class="n">states</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span>
            <span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s">'year'</span><span class="p">].</span><span class="n">isin</span><span class="p">(</span><span class="n">years</span><span class="p">)]</span>
			  <span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s">'loc'</span><span class="p">].</span><span class="n">isin</span><span class="p">(</span><span class="n">states</span><span class="p">)])</span>
    <span class="k">return</span> <span class="n">data</span>
</code></pre></div></div><h3 id="configuration-and-build-scripts"> <a href="#configuration-and-build-scripts" class="anchor-heading" aria-labelledby="configuration-and-build-scripts"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuration and Build Scripts</h3><p>Letâ€™s tie everything together, in the context of the previous example. Where should everything live?</p><div class="table-wrapper"><table><th><code>src/etl.py</code><th><code>config/etl.json</code><th><code>run.py</code><tr><td><br /><pre>
def get_data(fp, years, states):
    ....
    return data
</pre><td><pre>
{
  "fp": "data/raw",
  "years": [2020, 2021, 2022],
  "states": ["CA"]
}
</pre><td><pre>
...
config = json.loads(open(...))
get_data(**config)
</pre></table></div><p>This structure has several advantages:</p><ul><li>It it easy to track your â€œexperimentsâ€ â€“ you can create multiple config files, each of which corresponds to a different experiment.<ul><li>Here, you might make 5 config files, each of which corresponds to a different set of years and states.</ul><li>It makes it easy to change the scope of your project, as all that needs to change are the inputs, not the code itself.<li>It makes it clear to others what the main variables in your project are.</ul><p>As a reminder, you should try and have the names of the keys in your configuration JSON files match the parameter names of your functions. This will allow you to use <a href="https://www.educative.io/answers/what-is-unpacking-keyword-arguments-with-dictionaries-in-python">dictionary unpacking</a> when calling your functions. Also, as youâ€™ll see in the examples below, itâ€™s typical to have multiple configuration files, each of which corresponds to a different stage of your project.</p><hr /><h2 id="example-projects"> <a href="#example-projects" class="anchor-heading" aria-labelledby="example-projects"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example Projects</h2><p><a href="https://github.com/DSC-Capstone/project-templates">This repository</a> contains several example data science projects of different flavors; each project is stored in a different branch. You can use these templates to structure your projects.</p></div></div><div class="search-overlay"></div></div>
