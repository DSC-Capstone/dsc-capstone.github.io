<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>Lesson 1 – Servers | DSC 180AB</title><meta name="generator" content="Jekyll v3.9.2" /><meta property="og:title" content="Lesson 1 – Servers" /><meta name="author" content="Suraj Rampure" /><meta property="og:locale" content="en_US" /><meta name="description" content="DSC 180AB, Fall 2023 and Winter 2024 at UC San Diego" /><meta property="og:description" content="DSC 180AB, Fall 2023 and Winter 2024 at UC San Diego" /><link rel="canonical" href="http://localhost:4000/lessons/q1/01/" /><meta property="og:url" content="http://localhost:4000/lessons/q1/01/" /><meta property="og:site_name" content="DSC 180AB" /><meta property="og:type" content="website" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Lesson 1 – Servers" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Suraj Rampure"},"description":"DSC 180AB, Fall 2023 and Winter 2024 at UC San Diego","headline":"Lesson 1 – Servers","url":"http://localhost:4000/lessons/q1/01/"}</script><body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><title id="svg-external-link-title">(external link)</title><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> </svg><div class="side-bar"><div class="site-header"> <a href="/" class="site-title lh-tight"> DSC 180AB </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a></div><nav aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">🏡 Home</a><li class="nav-list-item"><a href="/syllabus/" class="nav-list-link">📓 Syllabus</a><li class="nav-list-item"><a href="/office-hours/" class="nav-list-link">📆 Office Hours</a><li class="nav-list-item"><a href="/staff/" class="nav-list-link">🙋 Staff</a><li class="nav-list-item"><a href="/mentors/" class="nav-list-link">👨‍🏫 Mentor Guide</a><li class="nav-list-item"><a href="/archive/" class="nav-list-link">💾 Archive</a></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search DSC 180AB" aria-label="Search DSC 180AB" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a href="https://www.gradescope.com/courses/637426" class="site-button" > Gradescope </a><li class="aux-nav-list-item"> <a href="https://edstem.org/us/courses/48541/discussion/" class="site-button" > Ed </a><li class="aux-nav-list-item"> <a href="https://dsc-capstone.github.io/enrollment" class="site-button" > List of Domains </a><li class="aux-nav-list-item"> <a href="https://dsc-capstone.github.io/2022-23" class="site-button" > 2022-23 Showcase </a></ul></nav></div><div id="main-content-wrap" class="main-content-wrap"><div id="main-content" class="main-content" role="main"><h1 class="no_toc" id="lesson-1--servers"> <a href="#lesson-1--servers" class="anchor-heading" aria-labelledby="lesson-1--servers"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Lesson 1 – Servers</h1><p>All lectures will be delivered as readings that you complete on your own time. Post questions with the lesson <a href="https://edstem.org/us/courses/28947/discussion/1834296">here</a>.</p><p>Make sure to read this article before moving on to <a href="../../../assignments/methodology/q1/01">Methodology Assignment 1</a>.</p><hr /><h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents</h2><ol id="markdown-toc"><li><a href="#local-development-vs-remote-development" id="markdown-toc-local-development-vs-remote-development">Local Development vs. Remote Development</a><ol><li><a href="#introduction" id="markdown-toc-introduction">Introduction</a><li><a href="#example" id="markdown-toc-example">Example</a><li><a href="#guidelines" id="markdown-toc-guidelines">Guidelines</a></ol><li><a href="#using-the-campus-cluster" id="markdown-toc-using-the-campus-cluster">Using the Campus Cluster</a><ol><li><a href="#datahub-and-dsmlp" id="markdown-toc-datahub-and-dsmlp">DataHub and DSMLP</a><li><a href="#accessing-dsmlp" id="markdown-toc-accessing-dsmlp">Accessing DSMLP</a><li><a href="#jupyter-notebooks-and-dsmlp" id="markdown-toc-jupyter-notebooks-and-dsmlp">Jupyter Notebooks and DSMLP</a><li><a href="#aside-ssh-keys" id="markdown-toc-aside-ssh-keys">Aside: SSH keys</a></ol><li><a href="#video" id="markdown-toc-video">Video</a></ol><hr /><h2 id="local-development-vs-remote-development"> <a href="#local-development-vs-remote-development" class="anchor-heading" aria-labelledby="local-development-vs-remote-development"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Local Development vs. Remote Development</h2><h3 id="introduction"> <a href="#introduction" class="anchor-heading" aria-labelledby="introduction"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Introduction</h3><p>In your coursework so far, the majority of the projects you’ve worked on were likely small enough in scale that you were able to run them entirely locally, i.e. on your personal computer. However, as your projects grow in scale and complexity, and your datasets grow in size, you will need to start resorting to more powerful <strong>servers</strong> to perform your computation. You will access servers <strong>remotely</strong> through your personal computer.</p><p>Servers are great, as they give you access to RAM, CPU, and GPU resources that far exceed those of your personal computer. In addition, it’s possible to let your code run on a server for days or weeks if necessary, which would be wildly inconvenient to do on your personal computer (imagine not letting your laptop go to sleep for a whole week 😴).</p><p>However, just because you have access to a server doesn’t mean you won’t need to write or run anything on your personal computer. After all, it’s far more convenient to run code on your personal computer than it is on a server, in part because your personal computer likely already has all of the packages it needs to run your project.</p><p>So then, when should you run code on your personal computer vs. on a server?</p><h3 id="example"> <a href="#example" class="anchor-heading" aria-labelledby="example"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example</h3><p>Let’s suppose you need to train a model on 1 TB of training data. On the server, it will take ~24 hours to run (it would be impossible to train this model on your personal computer – it would take far too long.) How do you go about training your model?</p><p>Here’s one solution:</p><ol><li>Get access to a large, expensive, remote GPU cluster and run <code class="language-plaintext highlighter-rouge">train.py</code> on it.<li>A day later, notice a bug in <code class="language-plaintext highlighter-rouge">train.py</code>, meaning all outputs are invalid. (This <strong>will</strong> happen to you!)<li>Re-run <code class="language-plaintext highlighter-rouge">train.py</code>.<li>Repeat steps 2 and 3 until you’re satisfied. By the time your code works as intended, weeks will have passed and many dollars will have been spent on computing resources.</ol><p>It is easy to fall into the trap of following the steps above. In fact, the same scenario can occur when working with a large dataset locally – you’ve likely re-run a piece of code locally several times and waited minutes for each run, tweaking small things after each run.</p><p>There’s a better solution:</p><ol><li>Develop your code locally on a small, representative set of your training data (for instance, a sample of 10,000 rows).<li>Once you’re content with your code, push it to GitHub from your personal computer, and pull it on the GPU cluster.<li>Run <code class="language-plaintext highlighter-rouge">train.py</code> once on the GPU cluster and be happy with the results!</ol><p>Moral of the story: don’t run under-tested code in production.</p><center><img src="assets/github.png" width="60%" /></center><h3 id="guidelines"> <a href="#guidelines" class="anchor-heading" aria-labelledby="guidelines"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Guidelines</h3><p>In order to run your code both on your personal computer and on a server, here are a few things you’ll need to keep in mind:</p><ol><li>Your code needs to stay up-to-date in both places. As such, make frequent commits when developing your code on your personal computer.<li>Remote servers typically don’t have graphical user interfaces, so you’ll need to use the command-line (bash), both generally and to interface with GitHub, since GitHub Desktop typically won’t be available. (Note that the server that we will use <strong>does</strong> provide access to Jupyter Notebooks and VS Code, as we will see shortly.)<li><strong>Your code needs to be able to run on both your personal computer and on the server.</strong> This means that you need to have the same versions of programming languages and packages in both places, i.e. that your methods need to be <strong>reproducible</strong>. <strong>Docker</strong> is a tool that will use in a few weeks to solve this issue.</ol><hr /><h2 id="using-the-campus-cluster"> <a href="#using-the-campus-cluster" class="anchor-heading" aria-labelledby="using-the-campus-cluster"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using the Campus Cluster</h2><h3 id="datahub-and-dsmlp"> <a href="#datahub-and-dsmlp" class="anchor-heading" aria-labelledby="datahub-and-dsmlp"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> DataHub and DSMLP</h3><p>You’ve already used a remote server in your data science classes before – DataHub! DataHub is a campus-hosted server that allows you to run Jupyter Notebooks. In fact, DataHub also allows you to use JupyterLab, a full-fledged IDE that contains a Terminal, a Python console, and a text editor, among other things. (Since there’s a Terminal, you can use Git to access your work.)</p><p>However, DataHub shuts down after 30 minutes of client inactivity, which makes it impossible to run jobs that require hours to run. In addition, most DataHub configurations only have a small amount of RAM and CPU resources, which won’t be sufficient for our purposes.</p><p>As such, <strong>we will not be using DataHub!</strong></p><p>Instead, we will be using UCSD’s Data Science and Machine Learning Platform (DSMLP). It turns out that DataHub is run on DSMLP, so in some sense you’ve already used it. However, <strong>you access DSMLP via the command-line, e.g. the Terminal</strong>. In the next section, we’ll look at exactly how to do so.</p><p>One of the advantages of learning how to work with DSMLP now is that many of the skills you gain will easily translate to other cloud computing services, like AWS, GCP, and Azure. To be precise, DSMLP is a Kubernetes cluster on which you can run processes in Docker containers; a Docker container is a package that contains everything needed to run an application (e.g. specific code, tools, and libraries), and Kubernetes is a tool that “orchestrates” containers, making sure each one has access to the resources it needs. We’ll learn more about both of these tools in the coming weeks.</p><h3 id="accessing-dsmlp"> <a href="#accessing-dsmlp" class="anchor-heading" aria-labelledby="accessing-dsmlp"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Accessing DSMLP</h3><p>Here, we will cover the basics of accessing DSMLP. For more advanced usage, see <a href="https://support.ucsd.edu/services?id=kb_category&amp;kb_category=368cc80fdb5c68d0d4781c79139619e2">campus documentation</a>, which is very detailed, as well as the <a href="../../../resources">Resources</a> tab of the course website.</p><div class="table-wrapper"><table><tbody><tr><td><strong>Step 1</strong>: Open your Terminal and run <code class="language-plaintext highlighter-rouge">ssh &lt;username&gt;@dsmlp-login.ucsd.edu</code>, where <code class="language-plaintext highlighter-rouge">&lt;username&gt;</code> is replaced with your official UCSD username. For instance, Suraj would run <code class="language-plaintext highlighter-rouge">ssh srampure@dsmlp-login.ucsd.edu</code>. Enter your password when prompted.</table></div><p>If you did this correctly, you will likely see a message that’s something along the lines of</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Hello srampure, you are currently logged into dsmlp-login.ucsd.edu

You are using 0% CPU on this system
</code></pre></div></div><p>Now, you’ve been placed into an initial “jumpbox” server. Think of this initial server as the lobby of a hotel – you <em>could</em> sleep here, but you probably want an actual room, i.e. an actual server. To specify which actual server we want to use, we need to run a <strong>launch script</strong>.</p><ul><li>There are several default launch scripts that exist, that initialize pre-configured servers with common tools pre-installed (like <code class="language-plaintext highlighter-rouge">pandas</code> and Jupyter Notebooks). When using a default launch script, there will always be some default amount of RAM, CPU, and GPU resources allocated, but you can provide flags when running the launch script to change these.<li>You can also create a custom launch script to initialize a custom environment with your own packages. We will see how to do this later.</ul><div class="table-wrapper"><table><tbody><tr><td><strong>Step 2</strong>: Now, in the same Terminal window enter <code class="language-plaintext highlighter-rouge">launch-scipy-ml.sh</code>.</table></div><p>This will initialize a server with 2 CPUs, 8 GB of RAM, and no GPUS, which are the default settings for this launch script. If we instead wanted to ask for 8 CPUs and 32 GB of RAM, we could have run <code class="language-plaintext highlighter-rouge">launch-scipy-ml.sh -c 8 -m 32</code>. This is not the only script that exists; for instance, we could have run <code class="language-plaintext highlighter-rouge">launch-scipy-ml-gpu.sh</code>. See <a href="https://support.ucsd.edu/services?id=kb_article_view&amp;sys_kb_id=899d64931b6c991048e9cae5604bcb6e">this page</a> for more details.</p><p>Once you’ve run the launch script, you now have access to a computer with the resources mentioned above! Note that the server runs Linux, so all of the command-line commands you use should work on Linux (not necessarily Windows or macOS). See the <a href="../../../command-line">Command-Line Cheat Sheet</a> for more tips.</p><center><img src="https://i.stack.imgur.com/x0m7v.png" width="75%" /></center><p><strong>Note:</strong> Both the initial jumpbox server and the server you launched have access to the same file system. If you’re curious, run <code class="language-plaintext highlighter-rouge">ls</code> in the Terminal before launching the full server and after, and you’ll see the same set of files.</p><h3 id="jupyter-notebooks-and-dsmlp"> <a href="#jupyter-notebooks-and-dsmlp" class="anchor-heading" aria-labelledby="jupyter-notebooks-and-dsmlp"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Jupyter Notebooks and DSMLP</h3><p>After running the launch script, you should see a link to a Jupyter Notebook at the very bottom of your Terminal window. For instance:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>You may access your Jupyter notebook at:  http://dsmlp-login.ucsd.edu:12733/user/srampure/?token=ce5cfea8c9a8892593868b91ddc55b21ff61220989eb17d6ee303c6604609009
</code></pre></div></div><p>If you copy the link that you see in your Terminal and try to open it in your web browser, you will likely get an error. To access this Jupyter Notebook, you need to follow one of the following two options.</p><p><strong>Option 1: Port Forwarding (recommended)</strong></p><p>Let’s take a closer look at the example link provided above.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://dsmlp-login.ucsd.edu:12733/user/srampure/?token=ce5cfea8c9a8892593868b91ddc55b21ff61220989eb17d6ee303c6604609009
</code></pre></div></div><p>Here, there are two components:</p><ul><li>A port, <code class="language-plaintext highlighter-rouge">12733</code> in this case, which appears right after <code class="language-plaintext highlighter-rouge">dsmlp-login.ucsd.edu:</code> (your port may be different).<li>A token, <code class="language-plaintext highlighter-rouge">ce5cfea8c9a8892593868b91ddc55b21ff61220989eb17d6ee303c6604609009</code> in this case (your token will be different).</ul><p>Now, <strong>open a new Terminal window on your personal computer</strong>, without closing the old one. This step is crucial – make sure that the name at the start of your command prompt is your personal computer’s name, not your username on the server. In that new Terminal window:</p><ol><li>Enter the command <code class="language-plaintext highlighter-rouge">ssh -N -L 8889:127.0.0.1:&lt;port&gt; &lt;user&gt;@dsmlp-login.ucsd.edu</code>.<ul><li>For instance, Suraj might enter <code class="language-plaintext highlighter-rouge">ssh -N -L 8889:127.0.0.1:12733 srampure@dsmlp-login.ucsd.edu</code>.</ul><li>After entering your password, if you see nothing, you’re on the right track. Open <code class="language-plaintext highlighter-rouge">http://localhost:8889/user/&lt;username&gt;/tree/</code> <strong>on your personal computer</strong>, again with <code class="language-plaintext highlighter-rouge">&lt;username&gt;</code> replaced with your own username (say, <code class="language-plaintext highlighter-rouge">srampure</code>) When prompted for a “Password or token”, enter the token you just found. You should then be good to go!<ul><li>If you change <code class="language-plaintext highlighter-rouge">tree</code> to <code class="language-plaintext highlighter-rouge">lab</code> in the URL, you’ll be brought to Jupyter Lab, the latest version of the Jupyter Notebooks interface. Jupyter Lab is an IDE, complete with a Terminal and text editor.<li>If you see an error message saying <code class="language-plaintext highlighter-rouge">channel 2: open failed: connect failed: Connection refused</code>, you are likely entering the wrong port number or the same port is being used elsewhere on your computer, like in another Terminal window.</ul><li>To disconnect:<ul><li>Stop your Jupyter instance, by either hitting the Quit button in the top-right corner of the Jupyter home page or entering <code class="language-plaintext highlighter-rouge">exit</code> in the Terminal used to launch the container.<li>Switch to the Terminal that is open on your personal computer (the one where you ran <code class="language-plaintext highlighter-rouge">ssh -N -L ...</code>) and hit <code class="language-plaintext highlighter-rouge">Ctrl+C</code> on your keyboard (regardless of your operating system) to kill the port-forwarding process.</ul></ol><p><strong>Option 2: Using the Campus VPN</strong></p><p>If you choose to go this route, follow the instructions <a href="https://blink.ucsd.edu/technology/network/connections/off-campus/VPN/">here</a>. Note that there are two versions of the UCSD VPN – one that works just in the web browser and one that works for your entire OS. Use the latter, since you’ll be working in the Terminal. (If you have an Apple Silicon Mac, you can follow the Mac instructions listed there, even though they say they’re for Intel Macs only.)</p><h3 id="aside-ssh-keys"> <a href="#aside-ssh-keys" class="anchor-heading" aria-labelledby="aside-ssh-keys"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Aside: SSH keys</h3><p>SSH keys allow you to skip the step of entering a password each time you’re accessing DSMLP. Follow the steps <a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys-2">here</a> to set them up. This only takes 2 minutes, but saves a ton of time, especially if your UCSD password is something long and cryptic.</p><hr /><h2 id="video"> <a href="#video" class="anchor-heading" aria-labelledby="video"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Video</h2><p>The following video walks through several of the steps mentioned above. It’s not a substitute for reading the rest of the lesson!</p><div style="position: relative; padding-bottom: 56.25%; height: 0;"><iframe src="https://www.loom.com/embed/6a868bb44936422b97e4beb05a08e3c7" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></iframe></div></div></div><div class="search-overlay"></div></div>
